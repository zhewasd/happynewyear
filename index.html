<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2024年跨年祝福</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #000;
            font-family: Arial, sans-serif;
            color: #fff;
        }

        #barrage-container {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .barrage {
            position: absolute;
            top: 0;
            white-space: nowrap;
        }

        .barrage p {
            margin: 0;
        }

        .barrage p span {
            padding: 0 10px;
            font-size: 18px;
            opacity: 0.8;
        }

        .barrage-clock {
            margin-bottom: 20px;
            font-size: 24px;
        }

        .chat-input {
            display: flex;
            margin-top: 20px;
        }

        .chat-input input[type="text"] {
            flex: 1;
            padding: 10px;
            font-size: 16px;
        }

        .chat-input input[type="submit"] {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #fff;
            color: #000;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="barrage-clock" id="countdown">
        <span id="days"></span> 天
        <span id="hours"></span> 小时
        <span id="minutes"></span> 分钟
        <span id="seconds"></span> 秒
    </div>

    <div id="barrage-container"></div>

    <div class="chat-input">
        <input type="text" id="message-input" placeholder="输入您的消息">
        <input type="submit" id="send-button" value="发送">
    </div>

    <script>
        // 设置跨年日期
        const countdownDate = new Date('January 1, 2024 00:00:00').getTime();

        // 更新倒计时
        function updateCountdown() {
            const now = new Date().getTime();
            const distance = countdownDate - now;

            // 计算剩余的天、时、分、秒
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            // 更新页面上的倒计时显示
            document.getElementById("days").innerHTML = days;
            document.getElementById("hours").innerHTML = hours;
            document.getElementById("minutes").innerHTML = minutes;
            document.getElementById("seconds").innerHTML = seconds;
        }

        // 创建弹幕元素
        function createBarrage() {
            const container = document.getElementById("barrage-container");
            const barrage = document.createElement("div");
            barrage.classList.add("barrage");

            const messages = [
                "祝大家跨年快乐！",
                "新的一年要幸福哦！",
                "希望大家心想事成！"
            ];

            const randomIndex = Math.floor(Math.random() * messages.length);
            const randomMessage = messages[randomIndex];

            barrage.innerHTML = `<p><span>${randomMessage}</span></p>`;

            container.appendChild(barrage);

            // 设置随机位置和速度
            const range = container.offsetHeight - barrage.offsetHeight;
            const speed = Math.floor(Math.random() * 4) + 2;

            barrage.style.top = `${Math.floor(Math.random() * range)}px`;
            barrage.style.animationDuration = `${speed}s`;

            // 弹幕动画结束后移除
            barrage.addEventListener("animationend", () => {
                container.removeChild(barrage);
            });
        }

        //// 发送弹幕
        function sendBarrage() {
            const message = messageInput.value.trim();

            if (message) {
                const container = document.getElementById("barrage-container");
                const barrage = document.createElement("div");
                barrage.classList.add("barrage");

                barrage.innerHTML = `<p><span>${message}</span></p>`;

                container.appendChild(barrage);

                // 清空输入框
                messageInput.value = "";

                // 设置随机位置和速度
                const range = container.offsetHeight - barrage.offsetHeight;
                const speed = Math.floor(Math.random() * 4) + 2;

                barrage.style.top = `${Math.floor(Math.random() * range)}px`;
                barrage.style.animationDuration = `${speed}s`;

                // 弹幕动画结束后移除
                barrage.addEventListener("animationend", () => {
                    container.removeChild(barrage);
                });
            }
        }

        // 定期创建弹幕
        setInterval(() => {
            createBarrage();
        }, 2000);

        // 点击发送按钮发送弹幕
        sendButton.addEventListener("click", () => {
            sendBarrage();
        });

        // 按下回车发送弹幕
        messageInput.addEventListener("keydown", (event) => {
            if (event.key === "Enter") {
                sendBarrage();
            }
        });

        // 每秒更新倒计时
        setInterval(() => {
            updateCountdown();
        }, 1000);

        // 页面加载完成后立即更新倒计时
        window.addEventListener("load", () => {
            updateCountdown();
        });
    </script>
</body>
</html>
